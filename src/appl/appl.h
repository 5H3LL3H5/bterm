/*******************************************************************************
 *   Description:   TODO
 *
 ******************************************************************************/

#ifndef _APPL_H
#define _APPL_H

/*******************************************************************************
 * INCLUDED FILES
 ******************************************************************************/

#include <memory>

#include <QObject>

#include "mainwindow.h"

#include "htcore.h"
#include "htdatasrc.h"
#include "htcodec.h"

#include "htevent_visitor_handle.h"


/*******************************************************************************
 * CLASS DECLARATION
 ******************************************************************************/

class Appl : public QObject
{
   Q_OBJECT;
   /****************************************************************************
    * TYPES
    ***************************************************************************/

   /****************************************************************************
    * CONSTRUCTOR, DESTRUCTOR
    ***************************************************************************/
public:
   explicit Appl();
   ~Appl();


   /****************************************************************************
    * PRIVATE DATA
    ***************************************************************************/
private:

   std::shared_ptr<HTCodec> p_codec;
   std::shared_ptr<HTDataSrc> p_data_src;
   std::unique_ptr<HTCore> p_htcore;

   HTEventVisitor_Handle htevent_visitor_handle;

   MainWindow main_window;



   /****************************************************************************
    * STATIC METHODS
    ***************************************************************************/

   /****************************************************************************
    * METHODS
    ***************************************************************************/

   /****************************************************************************
    * SIGNALS, SLOTS
    ***************************************************************************/
private slots:

   void onHTEvent(const std::shared_ptr<HTEvent> &);
   void onNewDataRaw(const std::vector<uint8_t> &data);
   void onNewDataMsg(const HTDataMsg &msg);



};


#endif // _APPL_H
