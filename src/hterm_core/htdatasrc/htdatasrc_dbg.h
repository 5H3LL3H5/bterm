/*******************************************************************************
 *   Description:   TODO
 *
 ******************************************************************************/

#ifndef _HTDATASRC_DBG_H
#define _HTDATASRC_DBG_H

/*******************************************************************************
 * INCLUDED FILES
 ******************************************************************************/


#include <cstdint>
#include <vector>

#include <QTimer>

#include "htdatasrc.h"

using namespace std;

/*******************************************************************************
 * CLASS DECLARATION
 ******************************************************************************/

class HTDataSrcDbg : public HTDataSrc
{
   Q_OBJECT
   /****************************************************************************
    * TYPES
    ***************************************************************************/

   /****************************************************************************
    * CONSTRUCTOR, DESTRUCTOR, ASSIGNMENT
    ***************************************************************************/
public:
   explicit HTDataSrcDbg();
   virtual ~HTDataSrcDbg();

   HTDataSrcDbg(const HTDataSrcDbg &other) = delete;
   HTDataSrcDbg(HTDataSrcDbg &&other) = delete;

   HTDataSrcDbg &operator=(const HTDataSrcDbg &other) = delete;
   HTDataSrcDbg &operator=(HTDataSrcDbg &&other) = delete;


   /****************************************************************************
    * PRIVATE DATA
    ***************************************************************************/
private:
   QTimer timer;
   vector<uint8_t> cur_data;

   int stage;


   /****************************************************************************
    * STATIC METHODS
    ***************************************************************************/

   /****************************************************************************
    * METHODS
    ***************************************************************************/
public:

   vector<uint8_t> read() override;
   void write(const vector<uint8_t> &data) override;


   /****************************************************************************
    * SIGNALS, SLOTS
    ***************************************************************************/
signals:
   void readyRead(int bytes_available);

private slots:
   void nextMsgGenerate();


   /****************************************************************************
    * OPERATORS
    ***************************************************************************/

};


#endif // _HTDATASRC_DBG_H
